<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid Search</title>
    <style>
        .grid {
            display: grid;
            gap: 1px;
            margin-top: 20px;
        }
        .cell {
            width: 30px;
            height: 30px;
            border: 1px solid black;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .controls input{
            height: 30px;
            font-size: 18px;
            padding: 5px;
            border: 1px solid black;
            margin-top: 20px;
        }
        .controls button{
            height: 40px;
            font-size: 18px;
            padding: 5px;
            border: 1px solid black;
            margin-top: 20px;
        }
        .legend {
            font-size: 20px;
        }
        .start { background-color: green; }
        .goal { background-color: blue; }
        .forbidden { background-color: red; }
        .path { background-color: orange; }
    </style>
</head>

<body>
    <div class="controls">
        <h1>Grid Search</h1>
        <label for="width">Width:</label>
        <input type="number" id="width" min="1" value="8">
        <label for="height">Height:</label>
        <input type="number" id="height" min="1" value="8">
        <label for="start">Start (x,y):</label>
        <input type="text" id="start" value="3,2">
        <label for="goal">Goal (x,y):</label>
        <input type="text" id="goal" value="2,5">
        <br>
        <label for="forbidden">Forbidden Squares (x1,y1; x2,y2 ;...):</label>
        <input type="text" id="forbidden" value="1,3;2,2;2,4;3,4;5,4;4,4;6,4;6,2">
        <br>
        <button onclick="initializeGrid()">Initialize Grid</button>
        <button onclick="runDFS()">Run DFS</button>
        <button onclick="runBFS()">Run BFS</button>
    </div>
    <div class="legend">
        <h2>Legend</h2>
        <div >Start - green</div>
        <div >Goal - blue</div>
        <div>Forbidden - red</div>
        <div>Path - orange </div>
    </div>
    <div id="gridContainer" class="grid"></div>
    <script>
let grid = [];
let start = { x: 0, y: 0 };
let goal = { x: 4, y: 4 };
let forbidden = new Set();
let width = 5;
let height = 5;

function initializeGrid() {
    width = parseInt(document.getElementById('width').value);
    height = parseInt(document.getElementById('height').value);
    start = parseCoordinates(document.getElementById('start').value);
    goal = parseCoordinates(document.getElementById('goal').value);
    forbidden = new Set(document.getElementById('forbidden').value.split(';').map(coord => coord.trim()));

    grid = Array.from({ length: height }, () => Array(width).fill(0));

    forbidden.forEach(coord => {
        const { x, y } = parseCoordinates(coord);
        if (x >= 0 && x < width && y >= 0 && y < height) {
            grid[y][x] = -1; // Mark forbidden squares
        }
    });

    renderGrid();
}

function parseCoordinates(coord) {
    const [x, y] = coord.split(',').map(Number);
    return { x, y };
}

function renderGrid() {
    const gridContainer = document.getElementById('gridContainer');
    gridContainer.innerHTML = '';
    gridContainer.style.gridTemplateColumns = `repeat(${width}, 30px)`;
    gridContainer.style.gridTemplateRows = `repeat(${height}, 30px)`;

    for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            if (x === start.x && y === start.y) {
                cell.classList.add('start');
            } else if (x === goal.x && y === goal.y) {
                cell.classList.add('goal');
            } else if (grid[y][x] === -1) {
                cell.classList.add('forbidden');
            }
            gridContainer.appendChild(cell);
        }
    }
}

function runDFS() {
    const visited = new Set();
    const path = [];
    const stack = [{ x: start.x, y: start.y, path: [] }];

    while (stack.length > 0) {
        const { x, y, path } = stack.pop();
        if (x === goal.x && y === goal.y) {
            renderPath(path);
            return;
        }

        if (visited.has(`${x},${y}`) || grid[y][x] === -1) {
            continue;
        }

        visited.add(`${x},${y}`);
        const newPath = [...path, { x, y }];
        if (y > 0) stack.push({ x, y: y - 1, path: newPath }); // up
        if (x > 0) stack.push({ x: x - 1, y, path: newPath }); // left
        if (x < width - 1) stack.push({ x: x + 1, y, path: newPath }); // right
        if (y < height - 1) stack.push({ x, y: y + 1, path: newPath }); // down
    }
    alert("No path found!");
}
function runBFS() {
    const visited = new Set();
    const queue = [{ x: start.x, y: start.y, path: [] }]; // Use a queue instead of a stack

    while (queue.length > 0) {
        const { x, y, path } = queue.shift(); // Dequeue the first element (FIFO)
        if (x === goal.x && y === goal.y) {
            renderPath(path);
            return;
        }

        if (visited.has(`${x},${y}`) || grid[y][x] === -1) {
            continue;
        }

        visited.add(`${x},${y}`);
        const newPath = [...path, { x, y }];

        // Order: up, left, right, down
        if (y > 0) queue.push({ x, y: y - 1, path: newPath }); // up
        if (x > 0) queue.push({ x: x - 1, y, path: newPath }); // left
        if (x < width - 1) queue.push({ x: x + 1, y, path: newPath }); // right
        if (y < height - 1) queue.push({ x, y: y + 1, path: newPath }); // down
    }

    alert("No path found!");
}
function renderPath(path) {
    const gridContainer = document.getElementById('gridContainer');
    const cells = gridContainer.getElementsByClassName('cell');

    path.forEach(({ x, y }) => {
        const index = y * width + x;
        if (!cells[index].classList.contains('start') && !cells[index].classList.contains('goal')) {
            cells[index].classList.add('path');
        }
    });
}
    </script>
</body>

</html>